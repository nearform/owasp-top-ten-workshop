import SQL from '@nearform/sql'

// This route exposes all users and their passwords for the purposes of simulating a data breach
export default async function register(fastify) {
  fastify.get('/all-data', async () => {
    const { rows } = await fastify.pg.query(
      SQL`SELECT username, password FROM users`
    )

    return rows
  })
}
